storages:
  summary: This API group is related to data source information management function.
  post:
    tags:
      - data source
    operationId: storageCreate
    summary: Create the data source information
    description: |-
      Create the data source information.
      <ul>
        <li>Data source ID cannot be specified.(automatically generated by VDL)</li>
      </ul>
      Request example: POST /api/v1/storages
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/storage.yml#/schemaStorageCreateRequest'
          examples:
            create_sample:
              $ref: '../components/examples/storage.yml#/storage_create_sample'
    responses:
      '201':
        description: Returns the created data source information.
        content:
          application/json:
            schema:
              $ref: '../components/schemas/storage.yml#/schemaStorage'
            example: 
              $ref: '../components/examples/storage.yml#/storage_get_sample'
      '403':
        description: Authorization function returned NG as an authorization decision result.
        content:
          text/plain:
            schema:
              type: string
            example: Operation not permitted.
      '409':
        description: |-
          Requested resource already exists.<br>
          When constraint violations occur at the time of resource registration.
        content:
          text/plain:
            schema:
              type: string
            example: Conflicts with current resources.
      '400':
        description: The required parameters for the request do not exist, or the input format is invalid.
        content:
          text/plain:
            schema:
              type: string
            example: Request is invalid.
      '401':
        description: No ID token or access token specified or If the discovery endpoint specified by "iss" in the token is not present in the configuration file.
        content:
          text/plain:
            schema:
              type: string
            example: Failed to authenticate.
      '500':
        description: An error occurred in the server's internal processing.
  get:
    tags:
      - data source
    operationId: storageList
    summary: List the data source informations
    description: |-
      List the data source informations.<br>
      Only resources authorized by authorization function are returned.<br>
      Supports filtering query.
      <ul>
        <li>If no query is specified, no refinement is performed.</li>
        <li>If multiple query conditions are specified, they are combined as logical product (AND) conditions.</li>
        <li>No restrictions are placed on the queries that can be specified (name_eq and name_contain can be simultaneously specified).</li>
        <li>OR conditional filtering is not provided.</li>
      </ul>
      Request example: GET /api/v1/storages?name_eq=src&status_eq=NotBound
    parameters:
      - $ref: '../components/parameters/param.yml#/queryName_eq'
      - $ref: '../components/parameters/param.yml#/queryName_contain'
      - $ref: '../components/parameters/param.yml#/queryStatus_eq'
      - $ref: '../components/parameters/param.yml#/queryProviderId_eq'
    responses:
      '200':
        description: |-
          Return a list of the data source information got.
          <ul>
            <li>If the target resource does not exist, or if authorization function returns NG as an authorization decision result for all resources, an empty array is returned.</li>
          </ul>
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '../components/schemas/storage.yml#/schemaStorage'
            example: 
              $ref: '../components/examples/storage.yml#/storage_list_sample'
      '400':
        description: The required parameters for the request do not exist, or the input format is invalid.
        content:
          text/plain:
            schema:
              type: string
            example: Request is invalid.
      '401':
        description: No ID token or access token specified or If the discovery endpoint specified by "iss" in the token is not present in the configuration file.
        content:
          text/plain:
            schema:
              type: string
            example: Failed to authenticate.
      '500':
        description: An error occurred in the server's internal processing.

storages_{storageId}:
  summary: This is a group of API that require storageId to be specified as a request parameter among the data provider information management functions.
  get:
    tags:
      - data source
    operationId: storageRead
    summary: Get the data source information
    description: |-
      Get the data source information.<br><br>
      Request example: GET /api/v1/storages/{storageId}
    parameters:
      - $ref: '../components/parameters/param.yml#/pathStorageId'
    responses:
      '200':
        description: Return the retrieved data source information.
        content:
          application/json:
            schema:
              $ref: '../components/schemas/storage.yml#/schemaStorage'
            example: 
              $ref: '../components/examples/storage.yml#/storage_get_sample'
      '404':
        description: |-
          The target resource does not exist.<br>
          Authorization function returned NG as an authorization decision result.
        content:
          text/plain:
            schema:
              type: string
            example: Requested resource not found.
      '400':
        description: The required parameters for the request do not exist, or the input format is invalid.
        content:
          text/plain:
            schema:
              type: string
            example: Request is invalid.
      '401':
        description: No ID token or access token specified or If the discovery endpoint specified by "iss" in the token is not present in the configuration file.
        content:
          text/plain:
            schema:
              type: string
            example: Failed to authenticate.
      '403':
        description: Authorization function returned NG as an authorization decision result.
        content:
          text/plain:
            schema:
              type: string
            example: Operation not permitted.
      '500':
        description: An error occurred in the server's internal processing.
  patch:
    tags:
      - data source
    operationId: storageUpdate
    summary: Update the data source information
    description: |-
      Update the data source information.<br>
      Update processing is performed as a partial update.<br><br>
      Request example: PATCH /api/v1/storages/{storageId}
    parameters:
      - $ref: '../components/parameters/param.yml#/pathStorageId'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/storage.yml#/schemaStorageUpdateRequest'
          examples:
            update_sample:
              $ref: '../components/examples/storage.yml#/storage_update_sample'
    responses:
      '204':
        description: Responds that the resource was able to be updated.
      '404':
        description: |-
          The target resource does not exist.<br>
          Authorization function returned NG as an authorization decision result.
        content:
          text/plain:
            schema:
              type: string
            example: Requested resource not found.
      '400':
        description: The required parameters for the request do not exist, or the input format is invalid.
        content:
          text/plain:
            schema:
              type: string
            example: Request is invalid.
      '401':
        description: No ID token or access token specified or If the discovery endpoint specified by "iss" in the token is not present in the configuration file.
        content:
          text/plain:
            schema:
              type: string
            example: Failed to authenticate.
      '403':
        description: Authorization function returned NG as an authorization decision result.
        content:
          text/plain:
            schema:
              type: string
            example: Operation not permitted.
      '500':
        description: An error occurred in the server's internal processing.
  delete:
    tags:
      - data source
    operationId: storageDelete
    summary: Delete the data source information
    description: |-
      Delete the data source information.<br><br>
      Request example: DELETE /api/v1/storages/{storageId}
    parameters:
      - $ref: '../components/parameters/param.yml#/pathStorageId'
    responses:
      '204':
        description: Responds that the resource has been successfully deleted.
      '404':
        description: |-
          The target resource does not exist.<br>
          Authorization function returned NG as an authorization decision result.
        content:
          text/plain:
            schema:
              type: string
            example: Requested resource not found.
      '403':
        description: |-
          If the target resource has not been deleted (For example, if it is referenced as a foreign key).<br>
          Authorization function returned NG as an authorization decision result.
        content:
          text/plain:
            schema:
              type: string
            example: Operation not permitted.
      '400':
        description: The required parameters for the request do not exist, or the input format is invalid.
        content:
          text/plain:
            schema:
              type: string
            example: Request is invalid.
      '401':
        description: No ID token or access token specified or If the discovery endpoint specified by "iss" in the token is not present in the configuration file.
        content:
          text/plain:
            schema:
              type: string
            example: Failed to authenticate.
      '500':
        description: An error occurred in the server's internal processing.

storages_{storageId}_{action}:
  summary: This is a group of API that require specifying storageId and action as request parameters among the data provider's information management functions.
  post:
    tags:
      - data source
    operationId: storageApply
    summary: Apply the action to the data source information
    description: |-
      Apply the action to the data source information.
      (Specifically, depending on the contents of the action parameter, either bind, rebind, or unbind processing is performed.)
      <ul>
        <li>action=bind: bind processing(start a new bind with bind options. The bind process can be executed only when the data source status is NotBound.)</li>
        <li>action=rebind: rebind processing(apply a change in binding options to the current bind. The rebind process can be executed only when the data source status is Bound.)</li>
        <li>action=unbind: unbind processing(remove the current bind. The unbind process can be executed only when the data source status is Bound.)</li>
      </ul>
      Request example: POST /api/v1/storages/{storageId}/{action}
    parameters:
      - $ref: '../components/parameters/param.yml#/pathStorageId'
      - $ref: '../components/parameters/param.yml#/pathAction'
    responses:
      '204':
        description: The response indicates that bind processing has been applied to the resource according to the action parameter.
      '404':
        description: |-
          The target resource does not exist.<br>
          Authorization function returned NG as an authorization decision result.
        content:
          text/plain:
            schema:
              type: string
            example: Requested resource not found.
      '409':
        description: |-
          When bind processing is executed while data source is Bound.<br>
          When a rebind or unbind processing is executed while data source is NotBound.
        content:
          text/plain:
            schema:
              type: string
            example: Conflicts with current resources.
      '400':
        description: The required parameters for the request do not exist, or the input format is invalid.
        content:
          text/plain:
            schema:
              type: string
            example: Request is invalid.
      '401':
        description: No ID token or access token specified or If the discovery endpoint specified by "iss" in the token is not present in the configuration file.
        content:
          text/plain:
            schema:
              type: string
            example: Failed to authenticate.
      '403':
        description: Authorization function returned NG as an authorization decision result.
        content:
          text/plain:
            schema:
              type: string
            example: Operation not permitted.
      '500':
        description: An error occurred in the server's internal processing.
