datasets: 
  summary: This API group is related to the dataset management function
  post:
    tags:
      - dataset
    operationId: datasetCreate
    summary: Create the dataset
    description: |-
      Create the dataset.
      <ul>
        <li>Dataset ID cannot be specified (automatically generated by VDL)</li>
      </ul>
      Request example: POST /api/v1/datasets
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/dataset.yml#/schemaCreateDatasetRequest'
          examples:
            create_dataType_batch_sample:
              $ref: '../components/examples/dataset.yml#/dataset_create_batch_sample'
            create_dataType_stream_sample:
              $ref: '../components/examples/dataset.yml#/dataset_create_stream_sample'  
    responses:
      '201':
        description: Returns the created the dataset
        content:
          application/json:
            schema:
              $ref: '../components/schemas/dataset.yml#/schemaDataset'
            examples:
              get_batch_sample: 
                $ref: '../components/examples/dataset.yml#/dataset_get_batch_sample'
              get_stream_sample: 
                $ref: '../components/examples/dataset.yml#/dataset_get_stream_sample'                
      '403':
        description: Authorization function returned NG as an authorization decision result
        content:
          text/plain:
            schema:
              type: string
            example: Operation not permitted
      '400':
        description: The required parameters for the request do not exist, or the input format is invalid
        content:
          text/plain:
            schema:
              type: string
            example: Request is invalid
      '401':
        description: No ID token or access token specified or If the discovery endpoint specified by "iss" in the token is not present in the configuration file
        content:
          text/plain:
            schema:
              type: string
            example: Failed to authenticate
      '500':
        description: An error occurred in the server's internal processing

datasets_search: 
  summary: This group of API is a search function for the dataset
  get:
    tags:
      - dataset
    operationId: datasetSearch
    summary: Search the dataset
    description: |-
      Search the dataset.
      <ul>
        <li>Only resources authorized by authorization function are returned</li>
        <li>Supports filtering query</li>
        <li>If no query is specified, no refinement is performed</li>
        <li>If multiple query conditions are specified, they are combined as logical product (AND) conditions</li>
        <li>OR/NOT conditional filtering is not provided</li>
      </ul>
      Request example: GET /api/v1/datasets/search?vdlPath_downward=%2FproviderA%2FdataSourceA%2Fdata&additionalInfo=true
    parameters:
      - $ref: '../components/parameters/param.yml#/queryName_eq'
      - $ref: '../components/parameters/param.yml#/queryName_contain'
      - $ref: '../components/parameters/param.yml#/queryDescription_contain'
      - $ref: '../components/parameters/param.yml#/queryCustomPropertyKey_eq'
      - $ref: '../components/parameters/param.yml#/queryCustomPropertyValue_eq'
      - $ref: '../components/parameters/param.yml#/queryCustomPropertyValue_contain'
      - $ref: '../components/parameters/param.yml#/queryVdlPath_eq'
      - $ref: '../components/parameters/param.yml#/queryVdlPath_upward'
      - $ref: '../components/parameters/param.yml#/queryVdlPath_downward'
      - $ref: '../components/parameters/param.yml#/queryTopicName_eq'
      - $ref: '../components/parameters/param.yml#/queryTopicName_contain'
      - $ref: '../components/parameters/param.yml#/queryTagname_eq'
      - $ref: '../components/parameters/param.yml#/queryTagname_contain'
      - $ref: '../components/parameters/param.yml#/queryTermname_eq'
      - $ref: '../components/parameters/param.yml#/queryTermname_contain'
      - $ref: '../components/parameters/param.yml#/queryOwner_eq'
      - $ref: '../components/parameters/param.yml#/queryAdditionalInfo'
      - $ref: '../components/parameters/param.yml#/querySearchConnector'
    responses:
      '200':
        description: |-
          Returns the results of a search for the dataset as an array
          <ul>
            <li>If the target resource does not exist, or if authorization function returns NG as an authorization decision result for all resources, an empty array is returned</li>
          </ul>
        content:
          application/json:
            schema:
              type: array
              description: List of the datasets
              items:
                $ref: '../components/schemas/dataset.yml#/schemaDatasetwithaddInfo'
            examples:
              get_stream_sample: 
                $ref: '../components/examples/dataset.yml#/dataset_stream_list_sample'
              get_sample_with_additionalInfo: 
                $ref: '../components/examples/dataset.yml#/dataset_list_sample_with_additionalInfo'
      '400':
        description: The required parameters for the request do not exist, or the input format is invalid
        content:
          text/plain:
            schema:
              type: string
            example: Request is invalid
      '401':
        description: No ID token or access token specified or If the discovery endpoint specified by "iss" in the token is not present in the configuration file
        content:
          text/plain:
            schema:
              type: string
            example: Failed to authenticate
      '403':
        description: Authorization function returned NG as an authorization decision result
        content:
          text/plain:
            schema:
              type: string
            example: Operation not permitted
      '500':
        description: An error occurred in the server's internal processing

datasets_{datasetId}: 
  summary: This is a group of API that require dataset Id to be specified as a request parameter among the dataset management functions
  get:
    tags:
      - dataset
    operationId: datasetRead
    summary: Get the dataset
    description: Get the dataset.
    parameters:
      - $ref: '../components/parameters/param.yml#/pathDatasetId'
      - $ref: '../components/parameters/param.yml#/queryAdditionalInfo'
    responses:
      '200':
        description: Return the retrieved dataset
        content:
          application/json:
            schema:
              $ref: '../components/schemas/dataset.yml#/schemaDatasetwithaddInfo'
            examples:
              get_stream_sample: 
                $ref: '../components/examples/dataset.yml#/dataset_get_stream_sample'
              get_sample_with_additionalInfo: 
                $ref: '../components/examples/dataset.yml#/dataset_get_sample_with_additionalInfo'
      '404':
        description: |-
          The target resource does not exist<br>
          Authorization function returned NG as an authorization decision result
        content:
          text/plain:
            schema:
              type: string
            example: Requested resource not found
      '400':
        description: The required parameters for the request do not exist, or the input format is invalid
        content:
          text/plain:
            schema:
              type: string
            example: Request is invalid
      '401':
        description: No ID token or access token specified or If the discovery endpoint specified by "iss" in the token is not present in the configuration file
        content:
          text/plain:
            schema:
              type: string
            example: Failed to authenticate
      '403':
        description: Authorization function returned NG as an authorization decision result
        content:
          text/plain:
            schema:
              type: string
            example: Operation not permitted
      '500':
        description: Internal Server Error
  patch:
    tags:
      - dataset
    operationId: datasetUpdate
    summary: Update the dataset
    description: |-
      Update the dataset with the data specified in the body parameter.<br>
      <ul>
        <li>Specified objects are replaced. Objects that description, tags, terms, customProperties, vdlSpec.*(excluding vdlspec.vdlPath) can be specified</li>
      </ul>
      Request example: PATCH /api/v1/datasets/{datasetId}
    parameters:
      - $ref: '../components/parameters/param.yml#/pathDatasetId'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/dataset.yml#/schemaUpdateDatasetRequest'
          examples:
            update_sample:
              $ref: '../components/examples/dataset.yml#/dataset_update_sample'
    responses:
      '204':
        description: Responds that the resource is successfully updated
      '404':
        description: |-
          The target resource does not exist<br>
          Authorization function returned NG as an authorization decision result
        content:
          text/plain:
            schema:
              type: string
            example: Requested resource not found
      '400':
        description: The required parameters for the request do not exist, or the input format is invalid
        content:
          text/plain:
            schema:
              type: string
            example: Request is invalid
      '401':
        description: No ID token or access token specified or If the discovery endpoint specified by "iss" in the token is not present in the configuration file
        content:
          text/plain:
            schema:
              type: string
            example: Failed to authenticate
      '403':
        description: Authorization function returned NG as an authorization decision result
        content:
          text/plain:
            schema:
              type: string
            example: Operation not permitted
      '500':
        description: An error occurred in the server's internal processing
  delete:
    tags:
      - dataset
    operationId: datasetDelete
    summary: Delete the dataset
    description: |-
      Delete the dataset.<br>
      Request example: DELETE /api/v1/datasets/{datasetId}
    parameters:
      - $ref: '../components/parameters/param.yml#/pathDatasetId'
    responses:
      '204':
        description: Responds that the resource has been successfully deleted
      '404':
        description: The target resource does not exist
        content:
          text/plain:
            schema:
              type: string
            example: Requested resource not found
      '403':
        description: Authorization function returned NG as an authorization decision result
        content:
          text/plain:
            schema:
              type: string
            example: Operation not permitted
      '400':
        description: The required parameters for the request do not exist, or the input format is invalid
        content:
          text/plain:
            schema:
              type: string
            example: Request is invalid
      '401':
        description: No ID token or access token specified or If the discovery endpoint specified by "iss" in the token is not present in the configuration file
        content:
          text/plain:
            schema:
              type: string
            example: Failed to authenticate
      '500':
        description: An error occurred in the server's internal processing

datasets_{datasetId}_{action}: 
  summary: This is a group of API that require specifying datasetId and action as request parameters among the dataset management functions
  post:
    tags:
      - dataset
    operationId: datasetApply
    summary: Apply the dataset 
    description: |-
      Apply the dataset.<br>
      <ul>
        <li>Apply the VDL definition information of the "Dataset Information" from the Business Metadata Management Platform to the Virtual Integration Platform.</li>
        <li>Specifically, apply the VDL definition information to the VDL path of the "Dataset Information" specified by the "Dataset ID" parameter.</li>
        <li>The VDL definition information to be applied is specified by the "Action" parameter.</li>
        <li>action=applyPathConf: Apply the "Path Configuration Information".</li>
        <li>action=applySync: Apply the "ActiveSync Enabled State".</li>
      </ul>
      Request example: post /api/v1/datasets/{datasetId}/{action}
    parameters:
      - $ref: '../components/parameters/param.yml#/pathDatasetId'
      - $ref: '../components/parameters/param.yml#/pathAction_dataset'      
    responses:
      '204':
        description: The response indicates that spec definition of the dataset (directive) has been applied to the vdlPath according to the action parameter
      '404':
        description: |-
          The target resource does not exist<br>
          Authorization function returned NG as an authorization decision result
        content:
          text/plain:
            schema:
              type: string
            example: Requested resource not found
      '409':
        description: When action is applySync, vdlSpec.activeSync is defined as true (false) in the dataset, but ActiveSync is already enabled (disabled) on the VDL actual status (That is, already applied)
        content:
          text/plain:
            schema:
              type: string
            example: Conflicts with current resources
      '400':
        description: The required parameters for the request do not exist, or the input format is invalid
        content:
          text/plain:
            schema:
              type: string
            example: Request is invalid
      '401':
        description: No ID token or access token specified or If the discovery endpoint specified by "iss" in the token is not present in the configuration file
        content:
          text/plain:
            schema:
              type: string
            example: Failed to authenticate
      '403':
        description: Authorization function returned NG as an authorization decision result
        content:
          text/plain:
            schema:
              type: string
            example: Operation not permitted
      '500':
        description: An error occurred in the server's internal processing

